<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <title>Friend Finder - Survey</title>
</head>

<body>
    <div class="container">
        <div class="card ">
            <img class="card-img-top" src="./images/nba-players.jpg" alt="nba-players">
            <div class="card-body">
                <form>
                    <div class="userInput">
                        <h3>Your Information!</h3>
                        <div class="form-group name">
                            <label for="friendName">Your Name</label>
                            <input type="name" class="confirmation" id="userName" placeholder="Enter your name">
                        </div>
                        <div class="form-group photo">

                            <label for="friendPhoto">Your Picture</label>
                            <input type="name" class="confirmation" id="userPhoto"
                                placeholder="Link to a photo of yourself">
                        </div>
                    </div>
                </form>

                <h3 class="card-title">Question 1: </h3>
                <p class="card-text">Are you willing to give up the ball for a better final shot?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q1">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 2: </h3>
                <p class="card-text">Is winning the most important thing to you?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q2">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 3: </h3>
                <p class="card-text">Would you take less money to add another player?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q3">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 4: </h3>
                <p class="card-text">Do you like cool handshakes and pre-game rituals?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q4">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 5: </h3>
                <p class="card-text">Do you care about your teammates off-season work ethic?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q5">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 6: </h3>
                <p class="card-text">Do you feel a loyalty to the fans of the franchise?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q6">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 7: </h3>
                <p class="card-text">Do off the court business ventures interfere with your season's success?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q7">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 8: </h3>
                <p class="card-text">Would you play through injuries if it meant winning a title?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q8">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 9: </h3>
                <p class="card-text">Do you set up activities for your teammates to bond over?
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q9">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <div class="card-body">
                <h3 class="card-title">Question 10: </h3>
                <p class="card-text">What it do baby?!
                    <form>
                        <div class="form-group">
                            <label for="sel1">Choose an option : </label>
                            <select class="form-control questions" id="q10">
                                <option value="">Choose an option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                </p>
            </div>
            <br>
            <a class="btn btn-primary submit" role="button">Submit Survey!</a>


        </div>

        <div id="myModal">
            <div class="modal-content">
                <h3>Here's your most compatible teammate!</h3>
                <h5 id=matchTeammate></h5>
                <img id="matchPic" src="" alt="My Match">
            </div>
        </div>



    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#myModal").css('display', 'none')
            $(".submit").on("click", function () {
                function confirmation() {
                    var isTrue = true;
                    $(".confirmation").each(function () {
                        if ($(this).val() === '') {
                            isTrue = false;
                        }
                    })

                    $(".questions").each(function () {
                        if ($(this).val() === "") {
                            isTrue = false;
                        }
                    })

                    return isTrue;
                }

                if (confirmation() == true) {
                    $("#myModal").css('display', 'block');
                    var newFriend = {
                        name: $('#userName').val().trim(),
                        profilePic: $("#userPhoto").val().trim(),
                        scores: [
                            $('#q1').val(),
                            $('#q2').val(),
                            $('#q3').val(),
                            $('#q4').val(),
                            $('#q5').val(),
                            $('#q6').val(),
                            $('#q7').val(),
                            $('#q8').val(),
                            $('#q9').val(),
                            $('#q10').val()
                        ]
                    }

                    var URL = window.location.origin;

                    $.post(URL + "/api/friends", newFriend, function (data) {
                        $("#matchTeammate").text(data.name);
                        $("#matchPic").attr("src", data.profilePic);
                    })

                    

                    $('#userName').val("");
                    $('#userPhoto').val("");
                    $('#q1').val("");
                    $('#q2').val("");
                    $('#q3').val("");
                    $('#q4').val("");
                    $('#q5').val("");
                    $('#q6').val("");
                    $('#q7').val("");
                    $('#q8').val("");
                    $('#q9').val("");
                    $('#q10').val("");
                }else {
                    alert("Make sure everything is filled before submitting, thank you :)")
                }
            })
        })
    </script>

</body>

</html>